package PageClasses;

import java.time.Duration;
import java.util.Set;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.FindBy;
import org.openqa.selenium.support.PageFactory;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;

import Utilities.BaseClass;

public class AccountDetailsPage extends BaseClass {
	
	WebDriver driver;
	public AccountDetailsPage(WebDriver driver)
	{
		this.driver=driver;
		PageFactory.initElements(driver, this);
	}
	
	
	@FindBy(xpath="//a[text()='Account Detail']")
	//@FindBy(xpath="//a[@href='https://growtechminds.wixsite.com/banking")
	WebElement link_AccountDetails;
	
	
	/* select your Name from dropdown*/ 
	
	//@FindBy(xpath="//select[@id='collection_comp-m8swuunx']")
	//@FindBy(xpath="//select[@class='wixui-dropdown__input McLPII has-custom-focus T6F83Z']")
	//@FindBy(xpath="//select[contains(@class,'wixui-dropdown__input')]")
		
	//@FindBy(xpath="(//select[@id='collection_comp-m8swuunx']/option)[1]")
	//@FindBy(xpath="(//select[contains(@id,'collection')])[1]/option[1]")
	
	//select[@id='collection_comp-m8swuunx']/option[1]
	
	@FindBy(xpath="//*[@id='comp-m8swuunx']/div/select[@class='wixui-dropdown__input McLPII has-custom-focus T6F83Z']")
	WebElement dropdown3;
	
	//@FindBy(xpath="//select[@id='collection_comp-m8swuunx']")
	@FindBy(xpath="//select[@id='collection_comp-m8swuunx']")
	WebElement selectYourName;
	
	@FindBy(xpath="(//select[@id='collection_comp-m8swuunx']/option[2])")
	WebElement select_dropdown_yourName;
	
	
	/*  this below code is working */
	public void selectDropdownOptionByIndex() {
		
		// Wait and then click the option
		new WebDriverWait(driver, Duration.ofSeconds(5))
	    .until(ExpectedConditions.visibilityOf(select_dropdown_yourName)).click();
//		((WebElement) driver.findElements(select_dropdown_yourName)).click();
	
		
		/* below code is working */ 
		//WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));
	    //   return wait.until(ExpectedConditions.visibilityOf(selectYourName));
	    
//		String text=driver.findElement((By) select_dropdown_yourName).getText();
//		System.out.println(text);
		
		/*  code below is working */
	       //return waitForElementVisible(select_dropdown_yourName,10);   
		
	    
	}
	
	
	
	//@FindBy(xpath="//select[@class='wixui-dropdown__input McLPII has-custom-focus T6F83Z']")
	@FindBy(xpath="//*[@id='comp-m8swuunx']/div")
	WebElement dropdown;

	//@FindBy(xpath="//select[@class='wixui-dropdown__input McLPII has-custom-focus T6F83Z']/option[@value=5]")
	@FindBy(xpath="(//div[@class='P6sHUt'])[1]")
	WebElement option3;
	
	/*  code is working */
	public void selectCustomDropdown3() {
	    //dropdown.click();
		new WebDriverWait(driver, Duration.ofSeconds(5))
	    .until(ExpectedConditions.visibilityOf(dropdown));
		dropdown.click();
	}

	public void selectCustomDropdown2() {
		// dropdown.click();
	    option3.click();
	}
	
	/* 1 */
	@FindBy(xpath="//select[contains(@class,'wixui-dropdown__input')]")
	WebElement dropdown1;
	
	public void selectCustomDropdown1() {
		
		new WebDriverWait(driver, Duration.ofSeconds(10))
	    .until(ExpectedConditions.visibilityOf(dropdown1));
	    Select select = new Select(dropdown1);
	    select.selectByIndex(4);
	}
	
	
	public void selectDropdownOptionByIndex(int index) {
	    WebElement dropdownElement = waitForElementVisible(selectYourName, 10);
	    Select select = new Select(dropdownElement);
	    select.selectByIndex(index);
	    
		
	}
	
	//select[contains(@class,'wixui-dropdown__input')]
		
	/* click on login button */
	//@FindBy(xpath="//span[@class='EIKVqt wixui-button__label']")
	@FindBy(xpath="//button[@class='_NpZMS wixui-button PlZyDq']")
	WebElement btn_Login;
	
	
	/* welecome to banking page */
	@FindBy(xpath="//span[text()='Welcome, 2!']")
	WebElement val_WelcometxtMessage;
	
	
	/* select Account Number from dropdown*/ 
	@FindBy(xpath="//select[@id='collection_comp-m8sxryjj']")
	WebElement selectAccountNumber;
	
	/* click on tab Deposit */
	@FindBy(xpath="(//span[@class='TabsList2027980309__label'])[2]]")
	WebElement tablabel_Deposit;
	
	/* enter amount to be deposit */
	@FindBy(xpath="(//input[@class='KvoMHf has-custom-focus wixui-text-input__input'])[2]")
	WebElement input_DepositAmount;
	
	/* click on deposit button */
	@FindBy(xpath="(//span[@class='EIKVqt wixui-button__label'])[4]")
	WebElement btn_Deposit;
	
	/* click on tab withdrawal */
	@FindBy(xpath="(//span[@class='EIKVqt wixui-button__label'])[3]")
	WebElement tablabel_Withdrawal;
	
	/* enter amount to be withdrawal */
	@FindBy(xpath="(//input[@class='KvoMHf has-custom-focus wixui-text-input__input'])[1]")
	WebElement input_WithdrawalAmount;
	
	/* click on withdrawal button */
	@FindBy(xpath="(//span[@class='EIKVqt wixui-button__label'])[3]")
	WebElement btn_Withdrawal;
	
	
	/*  deducted balanced amount */	
	@FindBy(xpath="(//p[@class='font_7 wixui-rich-text__text'])[3]")
	WebElement txt_BalanceAmount;
	
	
//	@FindBy(xpath="//div[@class='js-successbox t-form__successbox t-text t-text_md']")
//	WebElement textMessage;
	
	/*  click on Reset button */	
	@FindBy(xpath="(//span[@class='EIKVqt wixui-button__label'])[2]")
	WebElement btn_Reset;

	public void clickOnAccountDetails_Link()
	{
		//String mainWindow = driver.getWindowHandle();
		link_AccountDetails.click();
		
		// Wait for new windows to appear
//		Set<String> allWindows = driver.getWindowHandles();
//
//		// Loop through all windows
//		for (String handle : allWindows) {
//		    if (!handle.equals(mainWindow)) {
//		        // Switch to the new window
//		        driver.switchTo().window(handle);
//		        System.out.println("Switched to new window: " + driver.getTitle());
		        
		        // Do actions in new window
		        // ...

		        // Close the new window
//		        driver.close();
//
//		        // Switch back to the main window
//		        driver.switchTo().window(mainWindow);
//		    }
//		}
	}
		
	

	// Method to interact with the dropdown
//    public void selectDropdownOption() {
//        //WebElement dropdownElement = waitForElementVisible(selectYourName, 10);
//       // dropdownElement.click(); // or use Select class if it's a real <select>
//        
//        
//        WebElement dropdownElement = waitForElementVisible(selectYourName, 10);
//        Select select = new Select(dropdownElement);
//        select.selectByIndex(3);
//    }
    
    public void selectDropdownOption1(int index) {
        WebElement dropdownElement = waitForElementVisible(selectYourName, 5);
        Select select = new Select(dropdownElement);
        select.selectByIndex(index);
    }
    
//    public void selectOptionByVisibleText(String optionText) {
//        WebElement dropdownElement = waitForElementVisible(selectYourName, 10);
//        Select select = new Select(dropdownElement);
//        select.selectByVisibleText(optionText);
//    }
	
	public WebElement waitForElementVisible1(By selectYourName2, int timeoutInSeconds) {
		// TODO Auto-generated method stub
		
		 WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(timeoutInSeconds));
	        return wait.until(ExpectedConditions.visibilityOfElementLocated((By) selectYourName));
		//return null;
	}
	
	@FindBy(xpath="//div[@class='DYoNOT wixui-dropdown__list']")
	WebElement name;

	public void selectYourName(int x)
	{	
		WebElement dropdownElement1 = waitForElementVisible(name,0);
        Select oselect = new Select(dropdownElement1);
       
     	//Select oselect=new Select(name);
		oselect.selectByIndex(2);
			
		
	}	
	
	public void clickonLoginButton()
	{
		
		WebElement section = driver.findElement(By.id("comp-m8swx4kp"));
		((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);", section);

		//driver.findElement(By.cssSelector("_NpZMS wixui-button PlZyDq")).click();
		
		btn_Login.click();
	}	

	public void selectAccountNumber(int accountNum)
	{				
		Select oselect=new Select(selectAccountNumber);
		oselect.selectByIndex(2);
	}	
	public void clickOnTabDeposit() {
	    tablabel_Deposit.click();	
	}
	
	public void enterDepositAmount(String deposit_amount)
	{
		input_DepositAmount.sendKeys(deposit_amount);
	}
	
	public void clickOnDepositButton() {
		btn_Deposit.click();
	}
	
	public void clickOnTabWithdrawal() {
		tablabel_Withdrawal.click();
	
	}
	
	public void enterWithdrawalAmount(String withdrawwalamount)
	{
		input_WithdrawalAmount.sendKeys(withdrawwalamount);
	}
	
	public void clickOnWithdrawalButton() {
		btn_Withdrawal.click();
	}
	
	public void clickOnbtnReset() {
		btn_Reset.click();
	}

	public void selectDropdownOption(int option) {
		  WebElement dropdownElement = waitForElementVisible(selectYourName, 10);
	        Select select = new Select(dropdownElement);
	        select.selectByIndex(option);
		
	}
	


}
