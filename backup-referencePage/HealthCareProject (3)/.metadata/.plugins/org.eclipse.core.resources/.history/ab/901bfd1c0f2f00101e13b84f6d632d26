package testClasses;
import java.awt.AWTException;
import java.time.Duration;

import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.annotations.Test;

import pageClasses.PatientEndVisitPage;
import utilities.BaseClass;

public class PatientEndVisitTest extends BaseClass
{
	@Test(priority=2,groups={"sanity"},retryAnalyzer = utilities.RetryAnalyzer.class)
	public static void excuteEndVsistPatient() throws InterruptedException, AWTException
	{
	
		LoginTest.executeLoginTest();
		Thread.sleep(10000);

		scrollToTableHeader(driver);

		addExplicitWait3(PatientEndVisitPage.clickPatName());
		driver.findElement(PatientEndVisitPage.clickPatName()).click();
		
		scrollToTop(driver);
		Thread.sleep(3000);
		/*  elementToBeClickable */
//		addExplicitWait_elementclickable(PatientEndVisitPage.clickOnActions());
//		driver.findElement(PatientEndVisitPage.clickOnActions()).click();
		
		
		WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(50));
		WebElement button = wait.until(ExpectedConditions.elementToBeClickable(PatientEndVisitPage.clickOnActions()));
		button.click();

		// Then, wait for aria-expanded='true' if needed
		//wait.until(ExpectedConditions.attributeToBe(button, "aria-expanded", "false"));
		
		
		/* Pause to allow dropdown to open */
	    //Thread.sleep(1000);
		PatientEndVisitPage.selectOptionActions();
		
		Thread.sleep(10000);
		
	}
	
}
